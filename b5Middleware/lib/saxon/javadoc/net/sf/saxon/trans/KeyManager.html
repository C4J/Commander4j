<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_171) on Wed Aug 26 14:53:20 BST 2020 -->
<title>KeyManager</title>
<meta name="date" content="2020-08-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KeyManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/sf/saxon/trans/KeyIndex.Status.html" title="enum in net.sf.saxon.trans"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/sf/saxon/trans/LicenseException.html" title="class in net.sf.saxon.trans"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/sf/saxon/trans/KeyManager.html" target="_top">Frames</a></li>
<li><a href="KeyManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.sf.saxon.trans</div>
<h2 title="Class KeyManager" class="title">Class KeyManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>net.sf.saxon.trans.KeyManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">KeyManager</span>
extends java.lang.Object</pre>
<div class="block">KeyManager manages the set of key definitions in a stylesheet, and the indexes
 associated with these key definitions. It handles xsl:sort-key as well as xsl:key
 definitions.
 <p>The memory management in this class is subtle, with extensive use of weak references.
 The idea is that an index should continue to exist in memory so long as both the compiled
 stylesheet and the source document exist in memory: if either is removed, the index should
 go too. The document itself holds no reference to the index. The compiled stylesheet (which
 owns the KeyManager) holds a weak reference to the index. The index, of course, holds strong
 references to the nodes in the document. The Controller holds a strong reference to the
 list of indexes used for each document, so that indexes remain in memory for the duration
 of a transformation even if the documents themselves are garbage collected.</p>
 <p>Potentially there is a need for more than one index for a given key name, depending
 on the primitive type of the value provided to the key() function. An index is built
 corresponding to the type of the requested value; if subsequently the key() function is
 called with the same name and a different type of value, then a new index is built.</p>
 <p>For XSLT-defined keys, equality matching follows the rules of the eq operator, which means
 that untypedAtomic values are treated as strings. In backwards compatibility mode, <i>all</i>
 values are converted to strings.</p>
 <p>This class is also used for internal indexes constructed (a) to support the idref() function,
 and (b) (in Saxon-EE only) to support filter expressions of the form /a/b/c[d=e], where the
 path expression being filtered must be a single-document context-free path rooted at a document node,
 where exactly one of d and e must be dependent on the focus, and where certain other conditions apply
 such as the filter predicate not being positional. The operator in this case may be either "=" or "eq".
 If it is "eq", then the semantics are very similar to xsl:key indexes, except that use of non-comparable
 types gives an error rather than a non-match. If the operator is "=", however, then the rules for
 handling untypedAtomic values are different: these must be converted to the type of the other operand.
 In this situation the following rules apply. Assume that the predicate is [use=value], where use is
 dependent on the focus (the indexed value), and value is the sought value.</p>
 <ul>
 <li>If value is a type other than untypedAtomic, say T, then we build an index for type T, in which any
 untypedAtomic values that arise in evaluating "use" are converted to type T. A conversion failure results
 in an error. A value of a type that is not comparable to T also results in an error.</li>
 <li>If value is untypedAtomic, then we build an index for every type actually encountered in evaluating
 the use expression (treating untypedAtomic as string), and then search each of these indexes. (Note that
 it is not an error if the use expression returns a mixture of say numbers and dates, provided that the
 sought value is untypedAtomic).</li>
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Michael H. Kay</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#KeyManager-net.sf.saxon.Configuration-net.sf.saxon.expr.PackageData-">KeyManager</a></span>(<a href="../../../../net/sf/saxon/Configuration.html" title="class in net.sf.saxon">Configuration</a>&nbsp;config,
          <a href="../../../../net/sf/saxon/expr/PackageData.html" title="class in net.sf.saxon.expr">PackageData</a>&nbsp;pack)</code>
<div class="block">Create a KeyManager and initialise variables</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#addKeyDefinition-net.sf.saxon.om.StructuredQName-net.sf.saxon.trans.KeyDefinition-boolean-net.sf.saxon.Configuration-">addKeyDefinition</a></span>(<a href="../../../../net/sf/saxon/om/StructuredQName.html" title="class in net.sf.saxon.om">StructuredQName</a>&nbsp;keyName,
                <a href="../../../../net/sf/saxon/trans/KeyDefinition.html" title="class in net.sf.saxon.trans">KeyDefinition</a>&nbsp;keydef,
                boolean&nbsp;reusable,
                <a href="../../../../net/sf/saxon/Configuration.html" title="class in net.sf.saxon">Configuration</a>&nbsp;config)</code>
<div class="block">Register a key definition.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#clearDocumentIndexes-net.sf.saxon.om.TreeInfo-">clearDocumentIndexes</a></span>(<a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc)</code>
<div class="block">Clear all the indexes for a given document.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#exportKeys-net.sf.saxon.trace.ExpressionPresenter-java.util.Map-">exportKeys</a></span>(<a href="../../../../net/sf/saxon/trace/ExpressionPresenter.html" title="class in net.sf.saxon.trace">ExpressionPresenter</a>&nbsp;out,
          java.util.Map&lt;<a href="../../../../net/sf/saxon/expr/Component.html" title="class in net.sf.saxon.expr">Component</a>,java.lang.Integer&gt;&nbsp;componentIdMap)</code>
<div class="block">Diagnostic output explaining the keys</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#findKeyDefinition-net.sf.saxon.pattern.Pattern-net.sf.saxon.expr.Expression-java.lang.String-">findKeyDefinition</a></span>(<a href="../../../../net/sf/saxon/pattern/Pattern.html" title="class in net.sf.saxon.pattern">Pattern</a>&nbsp;finder,
                 <a href="../../../../net/sf/saxon/expr/Expression.html" title="class in net.sf.saxon.expr">Expression</a>&nbsp;use,
                 java.lang.String&nbsp;collationName)</code>
<div class="block">Look for a key definition that matches a proposed new key</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#getAllKeyDefinitionSets--">getAllKeyDefinitionSets</a></span>()</code>
<div class="block">Get all the key definition sets</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#getKeyDefinitionSet-net.sf.saxon.om.StructuredQName-">getKeyDefinitionSet</a></span>(<a href="../../../../net/sf/saxon/om/StructuredQName.html" title="class in net.sf.saxon.om">StructuredQName</a>&nbsp;qName)</code>
<div class="block">Get all the key definitions that match a particular name</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#getNumberOfKeyDefinitions--">getNumberOfKeyDefinitions</a></span>()</code>
<div class="block">Get the number of distinctly-named key definitions</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/sf/saxon/trans/KeyIndex.html" title="class in net.sf.saxon.trans">KeyIndex</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#obtainIndex-net.sf.saxon.trans.KeyDefinitionSet-net.sf.saxon.om.TreeInfo-net.sf.saxon.expr.XPathContext-">obtainIndex</a></span>(<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;keySet,
           <a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc,
           <a href="../../../../net/sf/saxon/expr/XPathContext.html" title="interface in net.sf.saxon.expr">XPathContext</a>&nbsp;context)</code>
<div class="block">Get the index supporting a particular key definition for a particular document.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#preRegisterKeyDefinition-net.sf.saxon.om.StructuredQName-">preRegisterKeyDefinition</a></span>(<a href="../../../../net/sf/saxon/om/StructuredQName.html" title="class in net.sf.saxon.om">StructuredQName</a>&nbsp;keyName)</code>
<div class="block">Pre-register a key definition.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/sf/saxon/om/SequenceIterator.html" title="interface in net.sf.saxon.om">SequenceIterator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#selectByCompositeKey-net.sf.saxon.trans.KeyDefinitionSet-net.sf.saxon.om.TreeInfo-net.sf.saxon.om.SequenceIterator-net.sf.saxon.expr.XPathContext-">selectByCompositeKey</a></span>(<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;keySet,
                    <a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc,
                    <a href="../../../../net/sf/saxon/om/SequenceIterator.html" title="interface in net.sf.saxon.om">SequenceIterator</a>&nbsp;soughtValue,
                    <a href="../../../../net/sf/saxon/expr/XPathContext.html" title="interface in net.sf.saxon.expr">XPathContext</a>&nbsp;context)</code>
<div class="block">Get the nodes with a given composite key value</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../net/sf/saxon/om/SequenceIterator.html" title="interface in net.sf.saxon.om">SequenceIterator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/trans/KeyManager.html#selectByKey-net.sf.saxon.trans.KeyDefinitionSet-net.sf.saxon.om.TreeInfo-net.sf.saxon.value.AtomicValue-net.sf.saxon.expr.XPathContext-">selectByKey</a></span>(<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;keySet,
           <a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc,
           <a href="../../../../net/sf/saxon/value/AtomicValue.html" title="class in net.sf.saxon.value">AtomicValue</a>&nbsp;soughtValue,
           <a href="../../../../net/sf/saxon/expr/XPathContext.html" title="interface in net.sf.saxon.expr">XPathContext</a>&nbsp;context)</code>
<div class="block">Get the nodes with a given key value</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="KeyManager-net.sf.saxon.Configuration-net.sf.saxon.expr.PackageData-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KeyManager</h4>
<pre>public&nbsp;KeyManager(<a href="../../../../net/sf/saxon/Configuration.html" title="class in net.sf.saxon">Configuration</a>&nbsp;config,
                  <a href="../../../../net/sf/saxon/expr/PackageData.html" title="class in net.sf.saxon.expr">PackageData</a>&nbsp;pack)</pre>
<div class="block">Create a KeyManager and initialise variables</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - the Saxon configuration</dd>
<dd><code>pack</code> - the package in which these keys are available</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="preRegisterKeyDefinition-net.sf.saxon.om.StructuredQName-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>preRegisterKeyDefinition</h4>
<pre>public&nbsp;void&nbsp;preRegisterKeyDefinition(<a href="../../../../net/sf/saxon/om/StructuredQName.html" title="class in net.sf.saxon.om">StructuredQName</a>&nbsp;keyName)</pre>
<div class="block">Pre-register a key definition. This simply registers that a key with a given name exists,
 without providing any details.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keyName</code> - the name of the key to be pre-registered</dd>
</dl>
</li>
</ul>
<a name="addKeyDefinition-net.sf.saxon.om.StructuredQName-net.sf.saxon.trans.KeyDefinition-boolean-net.sf.saxon.Configuration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addKeyDefinition</h4>
<pre>public&nbsp;void&nbsp;addKeyDefinition(<a href="../../../../net/sf/saxon/om/StructuredQName.html" title="class in net.sf.saxon.om">StructuredQName</a>&nbsp;keyName,
                             <a href="../../../../net/sf/saxon/trans/KeyDefinition.html" title="class in net.sf.saxon.trans">KeyDefinition</a>&nbsp;keydef,
                             boolean&nbsp;reusable,
                             <a href="../../../../net/sf/saxon/Configuration.html" title="class in net.sf.saxon">Configuration</a>&nbsp;config)
                      throws <a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></pre>
<div class="block">Register a key definition. Note that multiple key definitions with the same name are
 allowed</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keyName</code> - Structured QName representing the name of the key</dd>
<dd><code>keydef</code> - The details of the key's definition</dd>
<dd><code>reusable</code> - Set to true if indexes using this key definition can be used across multiple transformations, false if
                 the indexes need to be rebuilt for each transformation. Indexes are not reusable if the key definition contains references
                 to global variables or parameters, or calls used-defined functions or templates that might contain such references.</dd>
<dd><code>config</code> - The configuration</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></code> - if this key definition is inconsistent with existing key definitions having the same name</dd>
</dl>
</li>
</ul>
<a name="getKeyDefinitionSet-net.sf.saxon.om.StructuredQName-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyDefinitionSet</h4>
<pre>public&nbsp;<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;getKeyDefinitionSet(<a href="../../../../net/sf/saxon/om/StructuredQName.html" title="class in net.sf.saxon.om">StructuredQName</a>&nbsp;qName)</pre>
<div class="block">Get all the key definitions that match a particular name</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>qName</code> - The name of the required key</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The set of key definitions of the named key if there are any, or null otherwise.</dd>
</dl>
</li>
</ul>
<a name="findKeyDefinition-net.sf.saxon.pattern.Pattern-net.sf.saxon.expr.Expression-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findKeyDefinition</h4>
<pre>public&nbsp;<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;findKeyDefinition(<a href="../../../../net/sf/saxon/pattern/Pattern.html" title="class in net.sf.saxon.pattern">Pattern</a>&nbsp;finder,
                                          <a href="../../../../net/sf/saxon/expr/Expression.html" title="class in net.sf.saxon.expr">Expression</a>&nbsp;use,
                                          java.lang.String&nbsp;collationName)</pre>
<div class="block">Look for a key definition that matches a proposed new key</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>finder</code> - matches/selects the nodes to be indexed</dd>
<dd><code>use</code> - computes the value on which the nodes are indexed</dd>
<dd><code>collationName</code> - collation to be used</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a KeyDefinitionSet containing a key with the required characteristics if there
 is one, or null otherwise</dd>
</dl>
</li>
</ul>
<a name="selectByKey-net.sf.saxon.trans.KeyDefinitionSet-net.sf.saxon.om.TreeInfo-net.sf.saxon.value.AtomicValue-net.sf.saxon.expr.XPathContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>selectByKey</h4>
<pre>public&nbsp;<a href="../../../../net/sf/saxon/om/SequenceIterator.html" title="interface in net.sf.saxon.om">SequenceIterator</a>&nbsp;selectByKey(<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;keySet,
                                    <a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc,
                                    <a href="../../../../net/sf/saxon/value/AtomicValue.html" title="class in net.sf.saxon.value">AtomicValue</a>&nbsp;soughtValue,
                                    <a href="../../../../net/sf/saxon/expr/XPathContext.html" title="interface in net.sf.saxon.expr">XPathContext</a>&nbsp;context)
                             throws <a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></pre>
<div class="block">Get the nodes with a given key value</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keySet</code> - The set of key definitions identified by the key name used in the call to the key() function</dd>
<dd><code>doc</code> - The source document in question</dd>
<dd><code>soughtValue</code> - The required key value</dd>
<dd><code>context</code> - The dynamic context, needed only the first time when the key is being built</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an iteration of the selected nodes, always in document order with no duplicates</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></code> - if a dynamic error is encountered</dd>
</dl>
</li>
</ul>
<a name="selectByCompositeKey-net.sf.saxon.trans.KeyDefinitionSet-net.sf.saxon.om.TreeInfo-net.sf.saxon.om.SequenceIterator-net.sf.saxon.expr.XPathContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>selectByCompositeKey</h4>
<pre>public&nbsp;<a href="../../../../net/sf/saxon/om/SequenceIterator.html" title="interface in net.sf.saxon.om">SequenceIterator</a>&nbsp;selectByCompositeKey(<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;keySet,
                                             <a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc,
                                             <a href="../../../../net/sf/saxon/om/SequenceIterator.html" title="interface in net.sf.saxon.om">SequenceIterator</a>&nbsp;soughtValue,
                                             <a href="../../../../net/sf/saxon/expr/XPathContext.html" title="interface in net.sf.saxon.expr">XPathContext</a>&nbsp;context)
                                      throws <a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></pre>
<div class="block">Get the nodes with a given composite key value</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keySet</code> - The set of key definitions identified by the key name used in the call to the key() function</dd>
<dd><code>doc</code> - The source document in question</dd>
<dd><code>soughtValue</code> - The required key value</dd>
<dd><code>context</code> - The dynamic context, needed only the first time when the key is being built</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an iteration of the selected nodes, always in document order with no duplicates</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></code> - if a dynamic error is encountered</dd>
</dl>
</li>
</ul>
<a name="obtainIndex-net.sf.saxon.trans.KeyDefinitionSet-net.sf.saxon.om.TreeInfo-net.sf.saxon.expr.XPathContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>obtainIndex</h4>
<pre>public&nbsp;<a href="../../../../net/sf/saxon/trans/KeyIndex.html" title="class in net.sf.saxon.trans">KeyIndex</a>&nbsp;obtainIndex(<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&nbsp;keySet,
                            <a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc,
                            <a href="../../../../net/sf/saxon/expr/XPathContext.html" title="interface in net.sf.saxon.expr">XPathContext</a>&nbsp;context)
                     throws <a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></pre>
<div class="block">Get the index supporting a particular key definition for a particular document. The index is created
 if it does not already exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keySet</code> - the set of xsl:key definitions making up this key</dd>
<dd><code>doc</code> - the document to which the index applies</dd>
<dd><code>context</code> - the dynamic evaluation context</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the relevant index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></code> - if any failure occurs</dd>
</dl>
</li>
</ul>
<a name="clearDocumentIndexes-net.sf.saxon.om.TreeInfo-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearDocumentIndexes</h4>
<pre>public&nbsp;void&nbsp;clearDocumentIndexes(<a href="../../../../net/sf/saxon/om/TreeInfo.html" title="interface in net.sf.saxon.om">TreeInfo</a>&nbsp;doc)</pre>
<div class="block">Clear all the indexes for a given document. This is currently done whenever updates
 are applied to the document, because updates can potentially invalidate the indexes.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>doc</code> - the document whose indexes are to be invalidated</dd>
</dl>
</li>
</ul>
<a name="getAllKeyDefinitionSets--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllKeyDefinitionSets</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../net/sf/saxon/trans/KeyDefinitionSet.html" title="class in net.sf.saxon.trans">KeyDefinitionSet</a>&gt;&nbsp;getAllKeyDefinitionSets()</pre>
<div class="block">Get all the key definition sets</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a set containing all the key definition sets</dd>
</dl>
</li>
</ul>
<a name="getNumberOfKeyDefinitions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfKeyDefinitions</h4>
<pre>public&nbsp;int&nbsp;getNumberOfKeyDefinitions()</pre>
<div class="block">Get the number of distinctly-named key definitions</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of key definition sets (where the key definitions in one set share the same name)</dd>
</dl>
</li>
</ul>
<a name="exportKeys-net.sf.saxon.trace.ExpressionPresenter-java.util.Map-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>exportKeys</h4>
<pre>public&nbsp;void&nbsp;exportKeys(<a href="../../../../net/sf/saxon/trace/ExpressionPresenter.html" title="class in net.sf.saxon.trace">ExpressionPresenter</a>&nbsp;out,
                       java.util.Map&lt;<a href="../../../../net/sf/saxon/expr/Component.html" title="class in net.sf.saxon.expr">Component</a>,java.lang.Integer&gt;&nbsp;componentIdMap)
                throws <a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></pre>
<div class="block">Diagnostic output explaining the keys</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>out</code> - the expression presenter that will display the information</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../net/sf/saxon/trans/XPathException.html" title="class in net.sf.saxon.trans">XPathException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/sf/saxon/trans/KeyIndex.Status.html" title="enum in net.sf.saxon.trans"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/sf/saxon/trans/LicenseException.html" title="class in net.sf.saxon.trans"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/sf/saxon/trans/KeyManager.html" target="_top">Frames</a></li>
<li><a href="KeyManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright (c) 2004-2020 Saxonica Limited. All rights reserved.</small></p>
</body>
</html>
