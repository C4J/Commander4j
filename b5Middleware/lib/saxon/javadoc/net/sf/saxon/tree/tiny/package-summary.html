<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_171) on Wed Aug 26 14:53:22 BST 2020 -->
<title>net.sf.saxon.tree.tiny</title>
<meta name="date" content="2020-08-26">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="net.sf.saxon.tree.tiny";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/sf/saxon/tree/linked/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../net/sf/saxon/tree/util/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/sf/saxon/tree/tiny/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;net.sf.saxon.tree.tiny</h1>
<div class="docSummary">
<div class="block">This package is an implementation of the Saxon internal tree structure,
    designed to minimize memory usage, and the costs of allocating and garbage-collecting
    Java objects.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/AppendableCharSequence.html" title="interface in net.sf.saxon.tree.tiny">AppendableCharSequence</a></td>
<td class="colLast">
<div class="block">Defines a CharSequence to which characters can be appended</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/NodeVectorTree.html" title="interface in net.sf.saxon.tree.tiny">NodeVectorTree</a></td>
<td class="colLast">
<div class="block">Interface defining methods common to the TinyTree and the Domino tree model.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/AncestorIterator.html" title="class in net.sf.saxon.tree.tiny">AncestorIterator</a></td>
<td class="colLast">
<div class="block">This class enumerates the ancestor:: or ancestor-or-self:: axes,
 starting at a given node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/CharSlice.html" title="class in net.sf.saxon.tree.tiny">CharSlice</a></td>
<td class="colLast">
<div class="block">This is an implementation of the CharSequence interface: it implements
 a CharSequence as a view of an array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/CompressedWhitespace.html" title="class in net.sf.saxon.tree.tiny">CompressedWhitespace</a></td>
<td class="colLast">
<div class="block">This class provides a compressed representation of a sequence of whitespace characters.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/LargeStringBuffer.html" title="class in net.sf.saxon.tree.tiny">LargeStringBuffer</a></td>
<td class="colLast">
<div class="block">This is an implementation of the CharSequence interface: it implements
 a CharSequence as a list of arrays of characters (the individual arrays are known
 as segments).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/Statistics.html" title="class in net.sf.saxon.tree.tiny">Statistics</a></td>
<td class="colLast">
<div class="block">Statistics on the size of TinyTree instances, kept so that the system can learn how much space to allocate to new trees</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyAttributeImpl.html" title="class in net.sf.saxon.tree.tiny">TinyAttributeImpl</a></td>
<td class="colLast">
<div class="block">A node in the XML parse tree representing an attribute.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyAttributeMap.html" title="class in net.sf.saxon.tree.tiny">TinyAttributeMap</a></td>
<td class="colLast">
<div class="block">An implementation of the AttributeMap interface based directly on the
 TinyTree data structure.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyBuilder.html" title="class in net.sf.saxon.tree.tiny">TinyBuilder</a></td>
<td class="colLast">
<div class="block">The TinyBuilder class is responsible for taking a stream of SAX events and constructing
 a Document tree, using the "TinyTree" implementation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyBuilderCondensed.html" title="class in net.sf.saxon.tree.tiny">TinyBuilderCondensed</a></td>
<td class="colLast">
<div class="block">Variant of the TinyBuilder to create a tiny tree in which multiple text nodes or attribute
 nodes sharing the same string value economize on space by only holding the value once.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyBuilderMonitor.html" title="class in net.sf.saxon.tree.tiny">TinyBuilderMonitor</a></td>
<td class="colLast">
<div class="block">Monitor construction of a TinyTree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyDocumentImpl.html" title="class in net.sf.saxon.tree.tiny">TinyDocumentImpl</a></td>
<td class="colLast">
<div class="block">A node in the XML parse tree representing the Document itself (or equivalently, the root
 node of the Document).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyElementImpl.html" title="class in net.sf.saxon.tree.tiny">TinyElementImpl</a></td>
<td class="colLast">
<div class="block">A node in the XML parse tree representing an XML element.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyNodeImpl.html" title="class in net.sf.saxon.tree.tiny">TinyNodeImpl</a></td>
<td class="colLast">
<div class="block">A node in a TinyTree representing an XML element, character content, or attribute.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyParentNodeImpl.html" title="class in net.sf.saxon.tree.tiny">TinyParentNodeImpl</a></td>
<td class="colLast">
<div class="block">TinyParentNodeImpl is an implementation of a non-leaf node (specifically, an Element node
 or a Document node)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyTextImpl.html" title="class in net.sf.saxon.tree.tiny">TinyTextImpl</a></td>
<td class="colLast">
<div class="block">A node in the XML parse tree representing character content</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyTextualElement.html" title="class in net.sf.saxon.tree.tiny">TinyTextualElement</a></td>
<td class="colLast">
<div class="block">An element node in the TinyTree that has no attributes or namespace declarations and that
 has a single text node child.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TinyTree.html" title="class in net.sf.saxon.tree.tiny">TinyTree</a></td>
<td class="colLast">
<div class="block">A data structure to hold the contents of a tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/TreeStatistics.html" title="class in net.sf.saxon.tree.tiny">TreeStatistics</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../net/sf/saxon/tree/tiny/WhitespaceTextImpl.html" title="class in net.sf.saxon.tree.tiny">WhitespaceTextImpl</a></td>
<td class="colLast">
<div class="block">A node in the XML parse tree representing a text node with compressed whitespace content</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package net.sf.saxon.tree.tiny Description">Package net.sf.saxon.tree.tiny Description</h2>
<div class="block"><p>This package is an implementation of the Saxon internal tree structure,
    designed to minimize memory usage, and the costs of allocating and garbage-collecting
    Java objects.</p>

<p>The data structure consists of a set of arrays, held in the <code>TinyTree</code> object.
    A <code>TinyTree</code> represents one or more root document or element nodes, together with their
    subtrees. If there is more than one root node, these will often be members of a sequence, but
    this is not essential and is never assumed.
    The arrays are in three groups. </p>

<p>The principal group of arrays contain one entry for each node other
    than namespace and attribute nodes. These arrays are in document order. The following
    information is maintained for each node: the
    depth in the tree, the name code, the index of the next sibling, and two fields labelled "alpha" and "beta".
    The meaning of "alpha" and
    "beat" depends on the node type. For text nodes, comment nodes, and processing instructions
    these fields index into a StringBuffer holding the text. For element nodes, "alpha" is
    an index into the attributes table, and "beta" is an offset into the namespaces table.
    Either of these may be set to -1 if there are no attributes/namespaces.</p>

<p>A name code is an integer value that indexes into the NamePool object: it can be
    used to determine the prefix, local name, or namespace URI of an element or attribute name.</p>

<p>The attribute group holds the following information for each attribute node: parent
    element, prefix, name code, attribute type, and attribute value. Attributes
    for the same element are adjacent.</p>

<p>The namespace group holds one entry per namespace declaration (not one per namespace
    node). The following information is held: a pointer to the element on which the namespace
    was declared, and a namespace code. A namespace code is an integer, which the NamePool can
    resolve into a prefix and a namespace URI: the top 16 bits identify the prefix, the bottom
    16 bits the URI.</p>

<p>The data structure contains no Java object references: the links between elements and
    attributes/namespaces are all held as integer offsets. This reduces size, and also makes
    the whole structure relocatable (though this capability is not currently exploited).
    All navigation is done by serial traversal of the arrays, using
    the node depth as a guide. An array of pointers to the preceding sibling is created on
    demand, the first time that backwards navigation is attempted. There are no parent pointers;
    Saxon attempts to remember the parent while navigating down the tree, and where this is not
    possible it locates the parent by searching through the following siblings; the last sibling
    points back to the parent. The absence of the other pointers is a trade-off between tree-building time and
    transformation time: I found that in most cases, more time was spent creating these pointers
    than actually using them. Occasionally, however, in trees with a very large fan-out, locating
    ancestors can be slow.</p>

<p>When the tree is navigated, transient ("flyweight") nodes are created as Java objects.
    These disappear as soon as they are no longer needed. Note that to compare two nodes for
    identity, you can use either the isSameNode() method, or compare the results of
    generateId(). Comparing the Java objects using "==" is incorrect.</p>

<p>The tree structure implements the DOM interface as well as the Saxon NodeInfo interface.
    There are limitations in the DOM support, however: especially (a) the tree is immutable, so
    all updating methods throw an exception; (b) namespace declarations are not exposed as
    attributes, and (c) only the core DOM classes are provided.</p>

<p>The primary way of navigating the tree is through the XPath axes, accessible through the
    iterateAxis() method. The familiar DOM methods such as getNextSibling() and getFirstChild()
    are not provided as an intrinsic part of the <code>NodeInfo</code> interface: all navigation
    is done by iterating the axes, and each tree model provides its own implementations of the axes.
    However, there are helper methods in the shared <code>Navigator</code> class which many
    of these implementations choose to use.</p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/sf/saxon/tree/linked/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../net/sf/saxon/tree/util/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/sf/saxon/tree/tiny/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright (c) 2004-2020 Saxonica Limited. All rights reserved.</small></p>
</body>
</html>
