<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_171) on Wed Aug 26 14:53:22 BST 2020 -->
<title>FloatingPointConverter</title>
<meta name="date" content="2020-08-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FloatingPointConverter";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/sf/saxon/value/ExternalObject.html" title="interface in net.sf.saxon.value"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/sf/saxon/value/FloatValue.html" title="class in net.sf.saxon.value"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/sf/saxon/value/FloatingPointConverter.html" target="_top">Frames</a></li>
<li><a href="FloatingPointConverter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.sf.saxon.value</div>
<h2 title="Class FloatingPointConverter" class="title">Class FloatingPointConverter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>net.sf.saxon.value.FloatingPointConverter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">FloatingPointConverter</span>
extends java.lang.Object</pre>
<div class="block">This is a utility class that handles formatting of numbers as strings.
 <p>The algorithm for converting a floating point number to a string is taken from Guy L. Steele and
 Jon L. White, <i>How to Print Floating-Point Numbers Accurately</i>, ACM SIGPLAN 1990. It is algorithm
 (FPP)<sup>2</sup> from that paper. There are three separate implementations of the algorithm:</p>
 <ul>
 <li>One using long arithmetic and generating non-exponential output representations</li>
 <li>One using BigInteger arithmetic and generating non-exponential output representation</li>
 <li>One using BigInteger arithmetic and generating exponential output representations</li>
 </ul>
 <p>The choice of method depends on the value of the number being formatted.</p>
 <p>The module contains some residual code (mainly the routine for formatting integers) from the class
 AppenderHelper by Jack Shirazi in the O'Reilly book <i>Java Performance Tuning</i>. The floating point routines
 in that module were found to be unsuitable, since they used floating point arithmetic which introduces
 rounding errors.</p>
 <p>There are several reasons for doing this conversion within Saxon, rather than leaving it all to Java.
 Firstly, there are differences in the required output format, notably the absence of ".0" when formatting
 whole numbers, and the different rules for the range of numbers where exponential notation is used.
 Secondly, there are bugs in some Java implementations, for example JDK outputs 0.001 as 0.0010, and
 IKVM/GNU gets things very wrong sometimes. Finally, this implementation is faster for "everyday" numbers,
 though it is slower for more extreme numbers. It would probably be reasonable to hand over formatting
 to the Java platform (at least when running the Sun JDK) for exponents outside the range -7 to +7.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/value/FloatingPointConverter.html#DOUBLE_SIGN_MASK">DOUBLE_SIGN_MASK</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/value/FloatingPointConverter.html#FLOAT_SIGN_MASK">FLOAT_SIGN_MASK</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../net/sf/saxon/value/FloatingPointConverter.html" title="class in net.sf.saxon.value">FloatingPointConverter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/value/FloatingPointConverter.html#THE_INSTANCE">THE_INSTANCE</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static <a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/value/FloatingPointConverter.html#appendDouble-net.sf.saxon.tree.util.FastStringBuffer-double-boolean-">appendDouble</a></span>(<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;s,
            double&nbsp;d,
            boolean&nbsp;forceExponential)</code>
<div class="block">Append a string representation of a double value to a string buffer</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/value/FloatingPointConverter.html#appendFloat-net.sf.saxon.tree.util.FastStringBuffer-float-boolean-">appendFloat</a></span>(<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;s,
           float&nbsp;f,
           boolean&nbsp;forceExponential)</code>
<div class="block">Append a string representation of a float value to a string buffer</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/sf/saxon/value/FloatingPointConverter.html#appendInt-net.sf.saxon.tree.util.FastStringBuffer-int-">appendInt</a></span>(<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;s,
         int&nbsp;i)</code>
<div class="block">Format an integer, appending the string representation of the integer to a string buffer</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="THE_INSTANCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>THE_INSTANCE</h4>
<pre>public static&nbsp;<a href="../../../../net/sf/saxon/value/FloatingPointConverter.html" title="class in net.sf.saxon.value">FloatingPointConverter</a> THE_INSTANCE</pre>
</li>
</ul>
<a name="DOUBLE_SIGN_MASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DOUBLE_SIGN_MASK</h4>
<pre>public static final&nbsp;long DOUBLE_SIGN_MASK</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#net.sf.saxon.value.FloatingPointConverter.DOUBLE_SIGN_MASK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="FLOAT_SIGN_MASK">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FLOAT_SIGN_MASK</h4>
<pre>public static final&nbsp;int FLOAT_SIGN_MASK</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#net.sf.saxon.value.FloatingPointConverter.FLOAT_SIGN_MASK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="appendInt-net.sf.saxon.tree.util.FastStringBuffer-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendInt</h4>
<pre>public static&nbsp;<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;appendInt(<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;s,
                                         int&nbsp;i)</pre>
<div class="block">Format an integer, appending the string representation of the integer to a string buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - the string buffer</dd>
<dd><code>i</code> - the integer to be formatted</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the supplied string buffer, containing the appended integer</dd>
</dl>
</li>
</ul>
<a name="appendDouble-net.sf.saxon.tree.util.FastStringBuffer-double-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendDouble</h4>
<pre>public static&nbsp;<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;appendDouble(<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;s,
                                            double&nbsp;d,
                                            boolean&nbsp;forceExponential)</pre>
<div class="block">Append a string representation of a double value to a string buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - the string buffer to which the result will be appended</dd>
<dd><code>d</code> - the double to be formatted</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the original string buffer, now containing the string representation of the supplied double</dd>
</dl>
</li>
</ul>
<a name="appendFloat-net.sf.saxon.tree.util.FastStringBuffer-float-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>appendFloat</h4>
<pre>public static&nbsp;<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;appendFloat(<a href="../../../../net/sf/saxon/tree/util/FastStringBuffer.html" title="class in net.sf.saxon.tree.util">FastStringBuffer</a>&nbsp;s,
                                           float&nbsp;f,
                                           boolean&nbsp;forceExponential)</pre>
<div class="block">Append a string representation of a float value to a string buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - the string buffer to which the result will be appended</dd>
<dd><code>f</code> - the float to be formatted</dd>
<dd><code>forceExponential</code> - forces exponential notation if set (if not set, exponential notation
                         is used only for values outside the range 1e-6 to 1e+6)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the original string buffer, now containing the string representation of the supplied float</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/sf/saxon/value/ExternalObject.html" title="interface in net.sf.saxon.value"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/sf/saxon/value/FloatValue.html" title="class in net.sf.saxon.value"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/sf/saxon/value/FloatingPointConverter.html" target="_top">Frames</a></li>
<li><a href="FloatingPointConverter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright (c) 2004-2020 Saxonica Limited. All rights reserved.</small></p>
</body>
</html>
