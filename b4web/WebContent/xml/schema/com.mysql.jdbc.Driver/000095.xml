<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE DDL SYSTEM "schema.dtd">
<DDL>

	<statement>
		CREATE VIEW VIEW_LABELLER_PROCESS_ORDER_INFO AS (SELECT PO.PROCESS_ORDER, PO.MATERIAL, PO.STATUS, PO.DUE_DATE, MAT.DESCRIPTION, MAT.SHELF_LIFE, MAT.SHELF_LIFE_UOM, MAT.SHELF_LIFE_RULE, 
		  PO.REQUIRED_UOM, MATUOM.EAN, MATUOM.VARIANT, MAT.OLD_MATERIAL, C4J_GETLAYERS(PO.PROCESS_ORDER) AS DEFAULT_LAYERS, 
		  C4J_GETFULLPALLETQUANTITY(PO.PROCESS_ORDER) AS DEFAULT_QUANTITY, PO.UPDATED AS PROCESS_ORDER_UPDATED, MAT.UPDATED AS MATERIAL_UPDATED, 
		  CUST.CUSTOMER_NAME, APP_MATERIAL_CUSTOMER_DATA.DATA AS PART_NO
		 FROM APP_PROCESS_ORDER AS PO LEFT JOIN
		  APP_CUSTOMER AS CUST ON PO.CUSTOMER_ID = CUST.CUSTOMER_ID LEFT JOIN
		  APP_MATERIAL AS MAT ON PO.MATERIAL = MAT.MATERIAL LEFT JOIN
		  APP_MATERIAL_UOM AS MATUOM ON PO.MATERIAL = MATUOM.MATERIAL AND PO.REQUIRED_UOM = MATUOM.UOM LEFT JOIN
		  APP_MATERIAL_UOM AS MATUOMFULL ON PO.MATERIAL = MATUOMFULL.MATERIAL LEFT OUTER JOIN
		  APP_MATERIAL_CUSTOMER_DATA ON PO.MATERIAL = APP_MATERIAL_CUSTOMER_DATA.MATERIAL AND 
		  PO.CUSTOMER_ID = APP_MATERIAL_CUSTOMER_DATA.CUSTOMER_ID AND APP_MATERIAL_CUSTOMER_DATA.DATA_ID = 'PART_NO')
	</statement>
	
	<statement>
		ALTER TABLE `APP_PALLET_HISTORY` ADD INDEX `PH_DATE_NDX` (`TRANSACTION_DATE` ASC)  COMMENT ''
	</statement>
							
</DDL>