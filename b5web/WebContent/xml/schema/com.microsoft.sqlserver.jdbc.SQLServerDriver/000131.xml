<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE DDL SYSTEM "schema.dtd">
<DDL>

	<statement>
		ALTER VIEW [dbo].[view_sync3b] AS SELECT
			[APP_LABEL_DATA].[UNIQUE_ID],
			[APP_LABEL_DATA].LINE,
			[view_sync3a].[LABEL_TYPE],
			[APP_LABEL_DATA].[USER_ID],
			[APP_LABEL_DATA].[WORKSTATION_ID],
			[view_sync3a].[PROCESS_ORDER],
			[APP_LABEL_DATA].[REQUIRED_RESOURCE],
			[view_sync3a].MATERIAL,
			[APP_LABEL_DATA].[MATERIAL_TYPE],
			[APP_MATERIAL].DESCRIPTION,
			[view_sync3a].[BATCH_NUMBER],
			[APP_LABEL_DATA].[BATCH_PREFIX],
			[APP_LABEL_DATA].[BATCH_SUFFIX],
			[APP_PROCESS_ORDER].STATUS,
			[APP_PROCESS_ORDER].REQUIRED_UOM,
			[APP_LABEL_DATA].[PRINT_DATE],
			[APP_LABEL_DATA].[PROD_EAN],
			[APP_LABEL_DATA].[PROD_VARIANT],
			[APP_LABEL_DATA].[PROD_QUANTITY],
			[APP_LABEL_DATA].[PROD_UOM],
			[APP_LABEL_DATA].[BASE_EAN],
			[APP_LABEL_DATA].[BASE_VARIANT],
			[APP_LABEL_DATA].[BASE_QUANTITY],
			[APP_LABEL_DATA].[BASE_UOM],
			[APP_LABEL_DATA].[DATE_OF_MANUFACTURE],
			[APP_LABEL_DATA].[EXPIRY_DATE],
			[APP_MATERIAL].UPDATED AS [MATERIAL_UPDATED],
			[APP_PROCESS_ORDER].UPDATED AS [PROCESS_ORDER_UPDATED],
			[APP_PROCESS_ORDER].[CUSTOMER_ID],
			[APP_CUSTOMER].[CUSTOMER_NAME],
			[APP_LABEL_DATA].[OVERRIDE_MANUFACTURE_DATE],
			[APP_LABEL_DATA].[OVERRIDE_EXPIRY_DATE],
			[APP_LABEL_DATA].[OVERRIDE_BATCH_PREFIX],
			[APP_MATERIAL].[OVERRIDE_PACK_LABEL],
			[APP_MATERIAL].[PACK_LABEL_MODULE_ID],
			[APP_MATERIAL].[OVERRIDE_PALLET_LABEL],
			[APP_MATERIAL].[PALLET_LABEL_MODULE_ID],
			[APP_LABEL_DATA].LAYERS
			FROM
			[APP_LABEL_DATA]
			JOIN [view_sync3a]
			ON [APP_LABEL_DATA].[PROCESS_ORDER] = [view_sync3a].[PROCESS_ORDER]
			AND [APP_LABEL_DATA].MATERIAL = [view_sync3a].MATERIAL
			AND [APP_LABEL_DATA].[BATCH_NUMBER] = [view_sync3a].[BATCH_NUMBER]
			AND [APP_LABEL_DATA].[PRINT_DATE] = [view_sync3a].[LAST_PRINT_DATE]
			AND [APP_LABEL_DATA].[LABEL_TYPE] = [view_sync3a].[LABEL_TYPE]
			AND [APP_LABEL_DATA].LINE = [view_sync3a].LINE 
			JOIN [APP_PROCESS_ORDER]
			ON [APP_PROCESS_ORDER].[PROCESS_ORDER] = [view_sync3a].[PROCESS_ORDER] 
			JOIN [APP_MATERIAL]
			ON [APP_MATERIAL].MATERIAL = [APP_LABEL_DATA].MATERIAL 
			JOIN [APP_CUSTOMER]
			ON [APP_CUSTOMER].[CUSTOMER_ID] = [APP_PROCESS_ORDER].[CUSTOMER_ID]
			WHERE
			[APP_PROCESS_ORDER].STATUS = 'Ready' AND [APP_LABEL_DATA].LINE > ''
	</statement>
	
</DDL>